#  6 源码文本

ECMAScript源码文本是由一系列字符序列表示的，符合Unicode编码3.0或更新的版本。它期望文本是符合Unicode常规化表格C（权威典范），Unicode技术报告#15。遵循ECMAScript的实现并不要求执行文本的常规化，也不要求它们的行为好像执行了常规化。本规范假设ECMAScript源码文本是16位编码单元的字符序列。源码文本所包含的一些16位编码单元可能并非是UTF-16编码的字符。实际上，一个非16位编码单元形式的源码文本，在处理之前首先必须要转化成UTF-16。

> *SourceCharacter* ::  
>
>> any Unicode code unit

本文档其他所有地方提到的短语“code unit”（代码单元）和“character”（字符）都是指代一个16位无符号值，它表示单个16位单元的文本。短语“Unicode character”（Unicode字符）用来指代单个Unicode标量值的抽象的语言或排版单元（可能比16位要长，可能用多个代码单元表示）。短语“code point”（代码点）就是指代这个Unicode标量值。“Unicode character”仅指代单个Unicode标量值所表示的实体：一个复合字符序列的组成部分仍然是单独的“Unicode character”（Unicode字符），甚至用户可能会认为整个序列就是单个的字符。

字符串直接量、正则表达式直接量和各种标识符中，任何字符（代码单元）可能被明示地表示为一个由6个字符构成的转义的Unicode序列，也就是说\u之后紧跟4个16进制数字。如果在注释中，这样的转义序列被视为注释文本的一部分直接忽略，很高效。如果在字符串直接量或正则表达式直接量中，该转义的Unicode序列只是代表该直接量中的一个字符。如果在标识符中，该转义的Unicode序列也只是代表一个字符。

> 注：虽然本文档有时会引用一个“字符串”中的一个“字符”之间的一个“转换”，该16位无符号整数就是该字符的代码单元。事实上，根本没有什么“转换”，因为“字符串”中的一个“字符”实际上就是16位无符号整数值。

ECMAScript和Java编程语言的不同就在于Unicode的转义序列。在Java程序中，例如在一行注释中有一个转义的Unicode序列\u000A，就会被翻译为一个行终止符（Unicode字符000A就是一个换行符），因此下一个字符就不是该注释的一部分了。类似地在Java程序中，转义的Unicode序列\u000A出现在字符串直接量里时，也会被翻译为一个行终止符，这在字符串直接量中是不允许的——它必须写成\n而不是\u000A才能成为字符串值的一部分。在一个ECMAScript程序中，在一行注释中有一个转义的Unicode序列是不会被翻译的，所以不会引起注释的中断。类似地，转义的Unicode序列出现在一个字符串直接量中，总是被翻译成字符串值的一部分，而不会翻译成一个行终止符或者是一个中断字符串直接量的引号。